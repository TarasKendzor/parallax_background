{"version":3,"sources":["parallax.es6"],"names":["$","fn","parallax","method","methods","init","options","each","apply","Array","prototype","slice","call","arguments","error","jQuery","parallaxMouseScroll","settings","scrollTop","windowHeight","triggerPosition","zoom","shift","innerHeight","window","on","height","parallaxSelector","_section","sectionHeight","outerHeight","_sectionInner","find","animationTriggerStart","animationTriggerEnd","offset","animationLength","coef","css","top","addClass","centerPixelShift","centerPercentShift","y","TweenLite","to","animateDuration","ease","Linear","easeNone","removeClass","parallaxMouseMove","ww","wh","deviceOrientation","innerWidth","text","$thisSection","$thisInner","innerSize","lastGamma","lastBeta","rangeGamma","rangeBeta","addEventListener","e","roundedGamma","Math","round","gamma","roundedBeta","beta","x","gamaInPercent","betaInPercent","sectionWidth","outerWidth","pageX","left","width","pageY","cursorPercentPositionX","cursorPercentPositionY"],"mappings":"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","file":"parallax.js","sourcesContent":["\n(function($) {\n\n\n\n    $.fn.parallax = function(method) {\n\n        var methods = {\n\n            init : function(options) {\n\n                this.each(function(){\n\n                });\n\n\n            }\n        };\n\n\n\n\n        if ( methods[method] ) {\n            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n        } else if ( typeof method === 'object' || ! method ) {\n            return methods.init.apply( this, arguments );\n        } else {\n            $.error( 'Метод с именем ' +  method + ' не существует для jQuery.tooltip' );\n        }\n    };\n\n\n})(jQuery);\n\n//************************************\n// PARALLAX SCROLL\n//************************************\n\nfunction parallaxMouseScroll(settings) {\n\n\n    var scrollTop, windowHeight, triggerPosition;\n\n    var zoom = settings.zoom;\n    var shift = zoom / 2;\n    var innerHeight = zoom + 100;\n\n\n    $(window).on('scroll load', function () {\n        scrollTop = $(window).scrollTop();\n        windowHeight = $(window).height();\n\n        triggerPosition = scrollTop + windowHeight;\n    })\n\n    $(settings.parallaxSelector).each(function () {\n\n        var _section = $(this);\n        var sectionHeight = _section.outerHeight();\n\n        var _sectionInner = _section.find('.parallax-inner');\n\n        var animationTriggerStart, animationTriggerEnd;\n\n        var offset, animationLength;\n\n        var coef = innerHeight / 100;\n\n\n        _sectionInner.css({\n            'top': -shift + '%',\n            'height': innerHeight + '%'\n        });\n\n\n        $(window).on('load resize', function () {\n\n            offset = _section.offset();\n\n            animationTriggerStart = offset.top;\n\n            animationTriggerEnd = animationTriggerStart + windowHeight;\n\n            animationLength = animationTriggerEnd - animationTriggerStart;\n        });\n\n\n        $(window).on('scroll resize load', function () {\n\n            if (triggerPosition > animationTriggerStart && triggerPosition < animationTriggerEnd + sectionHeight) {\n\n                _section.addClass('active');\n\n                var centerPixelShift = triggerPosition - offset.top - (animationLength * 0.5);\n\n                var centerPercentShift = centerPixelShift / (animationLength / 100) * 2;\n\n                var y = shift / coef / 100 * centerPercentShift;\n\n\n                TweenLite.to(_sectionInner, settings.animateDuration, {y: y + '%', ease: Linear.easeNone});\n\n            }\n\n            else {\n                _section.removeClass('active');\n            }\n\n        })\n\n\n    });\n}\n\nparallaxMouseScroll({\n    parallaxSelector: '.scroll-parallax',\n    zoom: 60,\n    animateDuration: 0\n});\n\n//************************************\n// PARALLAX MOUSE MOVE\n//************************************\n\n\nfunction parallaxMouseMove(settings) {\n\n\n    let ww, wh, deviceOrientation;\n\n    $(window).on('load resize', function (){\n        ww = window.innerWidth;\n        wh = window.innerHeight;\n\n        if (ww > wh) {\n            deviceOrientation = 'landscape'\n        }\n\n        else {\n            deviceOrientation = 'portrait'\n        }\n\n\n        $('.debug .orientation').text(deviceOrientation);\n\n    });\n\n    $(settings.parallaxSelector).each(function () {\n\n        var $thisSection = $(this);\n\n        // console.log(_);\n\n        // var parallaxSelectorParent = $(settings.parallaxParentSelector);\n\n        var animateDuration = settings.animateDuration;\n        var zoom = settings.zoom;\n        var shift = zoom / 2;\n        var $thisSection = $(this);\n        var $thisInner = $thisSection.find('.parallax-inner');\n        var innerSize = shift * 2 + 100;\n        var coef = innerSize / 100;\n\n        var lastGamma , lastBeta, rangeGamma = 0, rangeBeta = 0  ;\n\n        $thisInner.css({\n            'top': -shift + '%',\n            'left': -shift + '%',\n            'height': innerSize + '%',\n            'width': innerSize + '%'\n\n        });\n        \n\n\n\n        window.addEventListener(\"deviceorientation\", function (e) {\n\n\n            var roundedGamma = Math.round(e.gamma);\n            var roundedBeta = Math.round(e.beta);\n            var x, y;\n\n            $('.debug .gamma').text(roundedGamma);\n            $('.debug .beta').text(roundedBeta);\n                \n            if (roundedGamma > lastGamma && rangeGamma < 15) {\n                rangeGamma++;\n            }\n            else if (roundedGamma < lastGamma && rangeGamma > -15) {\n                rangeGamma--;\n            }\n\n            if (roundedBeta > lastBeta && rangeBeta < 15) {\n                rangeBeta++;\n            }\n            else if (roundedBeta < lastBeta && rangeBeta > -15) {\n                rangeBeta--;\n            }\n\n            lastGamma = roundedGamma;\n            lastBeta = roundedBeta;\n\n            var gamaInPercent = (100 / 15) * rangeGamma;\n            var betaInPercent = (100 / 15) * rangeBeta;\n\n\n            //TODO Organize orientation statement\n\n            if (deviceOrientation == 'landscape') {\n                x = shift / coef / 100 * betaInPercent;\n                y = shift / coef / 100 * gamaInPercent;\n            }\n\n            else {\n                x = shift / coef / 100 * gamaInPercent;\n                y = (shift / coef / 100 * betaInPercent) * -1;\n            }\n\n\n            $('.debug .x').text(x);\n            $('.debug .y').text(y);\n\n\n\n            TweenLite.to($thisInner, animateDuration, {x: x + '%', y: y + '%'});\n\n\n        }, true);\n\n\n        $($thisSection).on(\"mousemove\", function (e) {\n\n            var offset = $thisSection.offset();\n\n            var sectionWidth = $thisSection.outerWidth();\n            var sectionHeight = $thisSection.outerHeight();\n\n            var pageX = e.pageX - offset.left - ($thisSection.width() * 0.5);\n            var pageY = e.pageY - offset.top - ($thisSection.height() * 0.5);\n\n            var cursorPercentPositionX = pageX / (sectionWidth / 100) * 2;\n            var cursorPercentPositionY = pageY / (sectionHeight / 100) * 2;\n\n            var x = shift / coef / 100 * cursorPercentPositionX;\n            var y = shift / coef / 100 * cursorPercentPositionY;\n\n            TweenLite.to($thisInner, animateDuration, {x: x + '%', y: y + '%'});\n\n        });\n    });\n}\n\nparallaxMouseMove({\n    // parallaxParentSelector: '.mouseParallax-section',\n    parallaxSelector: '.mouseParallax-section',\n    zoom: 40,\n    animateDuration: 0.5\n});"]}